# 变更日志

本文档记录项目的重要版本变更和功能更新。

## [v1.3.0] - 2025-08-13 - 用户体验优化

### 新增
- 🎯 实现输入框自动聚焦功能
- ⌨️ 单词加载完成后自动聚焦到输入框
- 🔄 答案提交后自动重新聚焦
- 📱 手动切换单词时自动聚焦

### 改进
- 🎨 优化输入体验，添加输入模式提示
- 🔧 关闭自动完成、自动纠错和拼写检查
- 📝 使用拉丁字符输入模式提示
- ⚡ 提升用户操作流畅性

### 修复
- 🐛 修复API端点不匹配问题（/api/check-answer）
- 🔧 解决TypeScript模块导入错误
- 📊 完善答案提交错误处理

### 技术变更
- 新增useRef钩子管理输入框引用
- 实现多场景自动聚焦逻辑
- 添加输入框优化属性（inputMode、autoComplete等）
- 修复React命名空间导入问题

## [v1.2.0] - 2025-01-XX - 开发流程优化

### 新增
- 📋 创建经验教训文档体系
- 🔧 建立功能修改决策流程（5个阶段）
- 📚 新增技术架构文档
- 🤝 建立用户确认机制

### 改进
- 🔄 优化开发规范文档结构
- 📖 完善文档交叉引用
- 🎯 强化影响评估要求
- 💬 建立标准化沟通模板

### 文档
- 新增 `docs/LESSONS_LEARNED.md` - 开发经验教训
- 新增 `docs/ARCHITECTURE.md` - 技术架构文档
- 更新 `DEVELOPMENT_RULES.md` - 增加决策流程

## [v1.1.0] - 2025-01-XX - 音频播放功能完善

### 新增
- 🔊 实现单词自动发音功能
- ⌨️ 添加音频播放快捷键（Shift+P）
- 🎵 支持有道API音频源
- 🔄 音频URL自动生成和修复

### 改进
- 🎯 优化音频播放优先级策略
- 🔧 完善音频处理错误处理
- 📱 改进前端音频播放体验
- 🚀 提升音频加载性能

### 修复
- 🐛 修复音频URL为空的问题
- 🔧 解决音频播放快捷键冲突
- 📊 修复数据库音频字段同步

### 技术变更
- 音频播放快捷键：P键 → Shift+P（避免输入冲突）
- 音频源优先级：有道API > Anki媒体 > 本地TTS
- 数据库：确保audio_url字段存储完整URL

## [v1.0.0] - 2025-08-13 - 系统扩展完成

### 新增
- 🎯 完整的单词学习系统
- 🤖 Google Gemini AI集成
- 🃏 Anki深度集成
- 📊 扩展数据模型（7个新字段）
- 🎨 现代化前端界面
- 🔧 完整的开发环境配置

### 核心功能
- ✅ 单词显示和学习
- ✅ 用户输入和反馈
- ✅ 图片和音频支持
- ✅ 键盘快捷键
- ✅ 调试面板
- ✅ Anki数据同步

### 数据模型
新增字段：
- `phonetic` - 音标
- `etymology` - 词源
- `exam_frequency` - 考试频率
- `star_level` - 星级
- `example_sentence` - 真题例句
- `example_translation` - 例句释义
- `related_words` - 相关词

### 技术栈
- **前端**: Next.js + TypeScript + Tailwind CSS
- **后端**: Flask + SQLAlchemy + SQLite
- **AI**: Google Gemini 2.0-Flash
- **集成**: AnkiConnect API
- **音频**: 有道API + 本地TTS

## [v0.1.0] - 项目初始化

### 新增
- 🏗️ 基础项目结构
- 🔧 开发环境配置
- 📝 初始文档

---

## 版本说明

### 版本号规则
- **主版本号**: 重大架构变更或不兼容更新
- **次版本号**: 新功能添加或重要改进
- **修订号**: 问题修复和小幅优化

### 变更类型
- 🎯 **新增**: 新功能或新特性
- 🔄 **改进**: 现有功能优化
- 🐛 **修复**: 问题修复
- 📚 **文档**: 文档更新
- 🔧 **技术**: 技术架构变更
- ⚠️ **破坏性变更**: 不兼容的重大变更

### 相关文档
- [开发规范](../DEVELOPMENT_RULES.md)
- [经验教训](LESSONS_LEARNED.md)
- [技术架构](ARCHITECTURE.md)

---

**维护说明**: 每次重要功能发布后更新此文档，记录关键变更和影响。